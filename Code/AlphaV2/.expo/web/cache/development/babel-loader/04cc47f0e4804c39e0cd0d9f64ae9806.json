{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Platform } from 'expo-modules-core';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ExecutionEnvironment } from \"./Constants.types\";\nvar ID_KEY = 'EXPO_CONSTANTS_INSTALLATION_ID';\n\nvar _sessionId = uuidv4();\n\nfunction getBrowserName() {\n  if (Platform.isDOMAvailable) {\n    var agent = navigator.userAgent.toLowerCase();\n\n    if (agent.includes('edge')) {\n      return 'Edge';\n    } else if (agent.includes('edg')) {\n      return 'Chromium Edge';\n    } else if (agent.includes('opr') && !!window['opr']) {\n      return 'Opera';\n    } else if (agent.includes('chrome') && !!window['chrome']) {\n      return 'Chrome';\n    } else if (agent.includes('trident')) {\n      return 'IE';\n    } else if (agent.includes('firefox')) {\n      return 'Firefox';\n    } else if (agent.includes('safari')) {\n      return 'Safari';\n    }\n  }\n\n  return undefined;\n}\n\nexport default {\n  get name() {\n    return 'ExponentConstants';\n  },\n\n  get appOwnership() {\n    return null;\n  },\n\n  get executionEnvironment() {\n    return ExecutionEnvironment.Bare;\n  },\n\n  get installationId() {\n    var installationId;\n\n    try {\n      installationId = localStorage.getItem(ID_KEY);\n\n      if (installationId == null || typeof installationId !== 'string') {\n        installationId = uuidv4();\n        localStorage.setItem(ID_KEY, installationId);\n      }\n    } catch (error) {\n      installationId = _sessionId;\n    } finally {\n      return installationId;\n    }\n  },\n\n  get sessionId() {\n    return _sessionId;\n  },\n\n  get platform() {\n    return {\n      web: Platform.isDOMAvailable ? {\n        ua: navigator.userAgent\n      } : undefined\n    };\n  },\n\n  get isHeadless() {\n    if (!Platform.isDOMAvailable) return true;\n    return /\\bHeadlessChrome\\//.test(navigator.userAgent);\n  },\n\n  get isDevice() {\n    return true;\n  },\n\n  get expoVersion() {\n    return this.manifest.sdkVersion || null;\n  },\n\n  get linkingUri() {\n    if (Platform.isDOMAvailable) {\n      return location.origin;\n    } else {\n      return '';\n    }\n  },\n\n  get expoRuntimeVersion() {\n    return this.expoVersion;\n  },\n\n  get deviceName() {\n    return getBrowserName();\n  },\n\n  get nativeAppVersion() {\n    return null;\n  },\n\n  get nativeBuildVersion() {\n    return null;\n  },\n\n  get systemFonts() {\n    return [];\n  },\n\n  get statusBarHeight() {\n    return 0;\n  },\n\n  get deviceYearClass() {\n    return null;\n  },\n\n  get manifest() {\n    return process.env.APP_MANIFEST || {};\n  },\n\n  get manifest2() {\n    return null;\n  },\n\n  get experienceUrl() {\n    if (Platform.isDOMAvailable) {\n      return location.origin;\n    } else {\n      return '';\n    }\n  },\n\n  get debugMode() {\n    return __DEV__;\n  },\n\n  getWebViewUserAgentAsync: function getWebViewUserAgentAsync() {\n    return function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!Platform.isDOMAvailable) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", navigator.userAgent);\n\n            case 4:\n              return _context.abrupt(\"return\", null);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  }\n};","map":{"version":3,"mappings":"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","names":["Platform","v4","uuidv4","ExecutionEnvironment","ID_KEY","_sessionId","getBrowserName","isDOMAvailable","agent","navigator","userAgent","toLowerCase","includes","window","undefined","name","appOwnership","executionEnvironment","Bare","installationId","localStorage","getItem","setItem","error","sessionId","platform","web","ua","isHeadless","test","isDevice","expoVersion","manifest","sdkVersion","linkingUri","location","origin","expoRuntimeVersion","deviceName","nativeAppVersion","nativeBuildVersion","systemFonts","statusBarHeight","deviceYearClass","process","env","APP_MANIFEST","manifest2","experienceUrl","debugMode","__DEV__","getWebViewUserAgentAsync"],"sourceRoot":"","sources":["../src/ExponentConstants.web.ts"],"sourcesContent":["import { Platform } from 'expo-modules-core';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n  ExecutionEnvironment,\n  NativeConstants,\n  PlatformManifest,\n  WebManifest,\n} from './Constants.types';\n\nconst ID_KEY = 'EXPO_CONSTANTS_INSTALLATION_ID';\n\ndeclare let __DEV__: boolean;\ndeclare let process: { env: any };\ndeclare let navigator: Navigator;\ndeclare let location: Location;\ndeclare let localStorage: Storage;\n\nconst _sessionId = uuidv4();\n\nfunction getBrowserName(): string | undefined {\n  if (Platform.isDOMAvailable) {\n    const agent = navigator.userAgent.toLowerCase();\n    if (agent.includes('edge')) {\n      return 'Edge';\n    } else if (agent.includes('edg')) {\n      return 'Chromium Edge';\n    } else if (agent.includes('opr') && !!window['opr']) {\n      return 'Opera';\n    } else if (agent.includes('chrome') && !!window['chrome']) {\n      return 'Chrome';\n    } else if (agent.includes('trident')) {\n      return 'IE';\n    } else if (agent.includes('firefox')) {\n      return 'Firefox';\n    } else if (agent.includes('safari')) {\n      return 'Safari';\n    }\n  }\n\n  return undefined;\n}\n\nexport default {\n  get name(): string {\n    return 'ExponentConstants';\n  },\n  get appOwnership() {\n    return null;\n  },\n  get executionEnvironment() {\n    return ExecutionEnvironment.Bare;\n  },\n  get installationId(): string {\n    let installationId;\n    try {\n      installationId = localStorage.getItem(ID_KEY);\n      if (installationId == null || typeof installationId !== 'string') {\n        installationId = uuidv4();\n        localStorage.setItem(ID_KEY, installationId as string);\n      }\n    } catch (error) {\n      installationId = _sessionId;\n    } finally {\n      return installationId;\n    }\n  },\n  get sessionId(): string {\n    return _sessionId;\n  },\n  get platform(): PlatformManifest {\n    return { web: Platform.isDOMAvailable ? { ua: navigator.userAgent } : undefined };\n  },\n  get isHeadless(): boolean {\n    if (!Platform.isDOMAvailable) return true;\n\n    return /\\bHeadlessChrome\\//.test(navigator.userAgent);\n  },\n  get isDevice(): true {\n    // TODO: Bacon: Possibly want to add information regarding simulators\n    return true;\n  },\n  get expoVersion(): string | null {\n    return this.manifest!.sdkVersion || null;\n  },\n  get linkingUri(): string {\n    if (Platform.isDOMAvailable) {\n      // On native this is `exp://`\n      // On web we should use the protocol and hostname (location.origin)\n      return location.origin;\n    } else {\n      return '';\n    }\n  },\n  get expoRuntimeVersion(): string | null {\n    return this.expoVersion;\n  },\n  get deviceName(): string | undefined {\n    return getBrowserName();\n  },\n  get nativeAppVersion(): null {\n    return null;\n  },\n  get nativeBuildVersion(): null {\n    return null;\n  },\n  get systemFonts(): string[] {\n    // TODO: Bacon: Maybe possible.\n    return [];\n  },\n  get statusBarHeight(): number {\n    return 0;\n  },\n  get deviceYearClass(): number | null {\n    // TODO: Bacon: The android version isn't very accurate either, maybe we could try and guess this value.\n    return null;\n  },\n  get manifest(): WebManifest {\n    // This is defined by @expo/webpack-config.\n    // If your site is bundled with a different config then you may not have access to the app.json automatically.\n    return process.env.APP_MANIFEST || {};\n  },\n  get manifest2(): null {\n    return null;\n  },\n  get experienceUrl(): string {\n    if (Platform.isDOMAvailable) {\n      return location.origin;\n    } else {\n      return '';\n    }\n  },\n  get debugMode(): boolean {\n    return __DEV__;\n  },\n  async getWebViewUserAgentAsync(): Promise<string | null> {\n    if (Platform.isDOMAvailable) {\n      return navigator.userAgent;\n    } else {\n      return null;\n    }\n  },\n} as NativeConstants;\n"]},"metadata":{},"sourceType":"module"}