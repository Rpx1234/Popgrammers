{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport LogBox from \"react-native-web/dist/exports/LogBox\";\nimport { View, Button, FormErrorMessage } from \"../components\";\nimport { Colors, db } from \"../config\";\nimport { Picker } from \"@react-native-picker/picker\";\nimport { getDatabase, ref, set, update, child, get, onValue } from \"firebase/database\";\nimport { collection, getDocs, updateDoc, doc, query, where } from \"firebase/firestore\";\nimport Counter from \"react-native-counters\";\nimport { ScrollView } from 'react-native-gesture-handler';\nexport var OrderScreen = function OrderScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      counter = _useState2[0],\n      setCounter = _useState2[1];\n\n  LogBox.ignoreLogs(['Setting a timer']);\n\n  var _useState3 = useState('Unknown'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      order = _useState4[0],\n      setOrder = _useState4[1];\n\n  var COL = 5;\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      seats = _useState8[0],\n      setSeats = _useState8[1];\n\n  var updateSeat = function updateSeat(taken, rowNum, seat) {\n    var DocRef;\n    return _regeneratorRuntime.async(function updateSeat$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            DocRef = doc(db, \"Theaters/Seating/Theater1\", rowNum);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(updateDoc(DocRef, _defineProperty({}, seat, taken)));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function seatTaken(position) {\n    switch (position) {\n      case true:\n        return styles.seatButton;\n        break;\n\n      case false:\n        return styles.seatButtonTaken;\n        break;\n    }\n  }\n\n  ;\n\n  function handleClick() {\n    setState('buttontaken');\n  }\n\n  useEffect(function () {\n    var getInventory = function getInventory() {\n      var inventorySnapshot, inventoryList;\n      return _regeneratorRuntime.async(function getInventory$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(getDocs(collection(db, \"Inventory\")));\n\n            case 2:\n              inventorySnapshot = _context2.sent;\n              inventoryList = inventorySnapshot.docs.map(function (doc) {\n                return doc.data();\n              });\n              setData(inventoryList);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getInventory();\n\n    var getSeating = function getSeating() {\n      var seatSnapshot, seatList;\n      return _regeneratorRuntime.async(function getSeating$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(getDocs(collection(db, \"Theaters/Seating/Theater1\")));\n\n            case 2:\n              seatSnapshot = _context3.sent;\n              seatList = seatSnapshot.docs.map(function (doc) {\n                return doc.data();\n              });\n              setSeats(seatList);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getSeating();\n  }, []);\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(ScrollView, null, React.createElement(Text, {\n    style: styles.screenTitle\n  }, \"New Order\"), React.createElement(Text, {\n    style: styles.text\n  }, \" Ticket Order\"), React.createElement(Picker, {\n    selectedValue: order,\n    onValueChange: function onValueChange(value, index) {\n      return setOrder(value);\n    },\n    mode: \"dropdown\",\n    style: styles.picker\n  }, React.createElement(Picker.Item, {\n    label: \"Please select your Order\",\n    value: \"Unknown\"\n  }), React.createElement(Picker.Item, {\n    label: \"Theater 1 5PM\",\n    value: \"Theater 1\"\n  }), React.createElement(Picker.Item, {\n    label: \"Theater 2 5PM\",\n    value: \"Theater 2\"\n  })), seats.map(function (seats, index1, index2, index3) {\n    return React.createElement(React.Fragment, null, React.createElement(View, {\n      style: styles.containerseats\n    }, React.createElement(Text, {\n      style: styles.itemText\n    }, \" Row \", index1 + 1, \" \"), React.createElement(Button, {\n      key: seats,\n      style: seatTaken(seats.A),\n      onPress: (function () {\n        return updateSeat(false, 'Row' + (index1 + 1), 'A');\n      }, handleClick())\n    }), React.createElement(Button, {\n      key: index1,\n      style: seatTaken(seats.B),\n      onPress: function onPress() {\n        return updateSeat(false, 'Row' + (index1 + 1), 'B');\n      }\n    }), React.createElement(Button, {\n      key: index2,\n      style: seatTaken(seats.C),\n      onPress: function onPress() {\n        return updateSeat(false, 'Row' + (index1 + 1), 'C');\n      }\n    }), React.createElement(Button, {\n      key: index3,\n      style: seatTaken(seats.D),\n      onPress: function onPress() {\n        return updateSeat(false, 'Row' + (index1 + 1), 'D');\n      }\n    })));\n  }), data.map(function (data, qty) {\n    return React.createElement(React.Fragment, null, React.createElement(View, {\n      style: styles.parent\n    }, React.createElement(View, {\n      style: styles.block\n    }, React.createElement(Text, {\n      key: data,\n      style: styles.itemText\n    }, \" \", data.name)), React.createElement(View, {\n      style: styles.block\n    }, React.createElement(Counter, {\n      start: parseInt(0),\n      max: parseInt(data.qty),\n      onChange: function onChange(len, type) {\n        console.log(len, type);\n        qty = len;\n      }\n    }))));\n  }), React.createElement(Button, {\n    style: styles.buttonsubmit,\n    onPress: function onPress() {\n      return updateInventory(data.name, qty);\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonText\n  }, \"Submit Order\")), React.createElement(Button, {\n    style: styles.borderlessButtonContainer,\n    borderless: true,\n    title: 'Cancel Order',\n    onPress: function onPress() {\n      return navigation.navigate('CustomerHomeScreen');\n    }\n  })));\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'black',\n    paddingHorizontal: 12,\n    alignItems: 'center'\n  },\n  screenTitle: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: Colors.orange,\n    paddingTop: 10,\n    textAlign: 'center'\n  },\n  text: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: Colors.orange,\n    paddingTop: 10,\n    textAlign: 'center'\n  },\n  button: {\n    width: '10%',\n    height: 18,\n    marginTop: 8,\n    alignItems: 'center',\n    backgroundColor: Colors.orange,\n    padding: 10,\n    borderRadius: 8,\n    marginRight: 8\n  },\n  buttonsubmit: {\n    width: '50%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'center',\n    marginTop: 8,\n    backgroundColor: Colors.orange,\n    padding: 10,\n    borderRadius: 8\n  },\n  buttontaken: {\n    width: '10%',\n    height: 18,\n    marginTop: 8,\n    backgroundColor: Colors.black,\n    borderColor: Colors.white,\n    padding: 10,\n    borderWidth: 2,\n    borderRadius: 8,\n    marginRight: 8,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  buttonText: {\n    fontSize: 20,\n    color: Colors.white,\n    fontWeight: '700'\n  },\n  borderlessButtonContainer: {\n    marginTop: 16,\n    alignItems: 'center'\n  },\n  picker: {\n    marginVertical: 30,\n    width: 300,\n    padding: 10,\n    borderWidth: 5,\n    color: Colors.black,\n    backgroundColor: 'white'\n  },\n  containerseats: {\n    flexDirection: 'row',\n    flex: 1,\n    alignContent: 'space-around',\n    padding: 5\n  },\n  seatButton: {\n    width: '10%',\n    height: 18,\n    marginTop: 8,\n    backgroundColor: Colors.orange,\n    padding: 10,\n    borderRadius: 8,\n    marginRight: 8\n  },\n  seatButtonTaken: {\n    width: '10%',\n    height: 18,\n    marginTop: 8,\n    backgroundColor: Colors.black,\n    borderColor: Colors.white,\n    padding: 9,\n    borderWidth: 2,\n    borderRadius: 8,\n    marginRight: 8,\n    alignItems: 'center',\n    justifyContent: 'flex-end'\n  },\n  itemText: {\n    fontSize: 20,\n    fontWeight: '500',\n    color: '#ff9361'\n  },\n  parent: {\n    flexDirection: \"row\"\n  },\n  block: {\n    flex: 3,\n    margin: 6\n  }\n});","map":{"version":3,"sources":["C:/Users/camer/Documents/GitHub/Popgrammers/Code/AlphaV2/screens/OrderScreen.js"],"names":["React","useState","useRef","useEffect","View","Button","FormErrorMessage","Colors","db","Picker","getDatabase","ref","set","update","child","get","onValue","collection","getDocs","updateDoc","doc","query","where","Counter","ScrollView","OrderScreen","navigation","counter","setCounter","LogBox","ignoreLogs","order","setOrder","COL","data","setData","seats","setSeats","updateSeat","taken","rowNum","seat","DocRef","seatTaken","position","styles","seatButton","seatButtonTaken","handleClick","setState","getInventory","inventorySnapshot","inventoryList","docs","map","getSeating","seatSnapshot","seatList","container","screenTitle","text","value","index","picker","index1","index2","index3","containerseats","itemText","A","B","C","D","qty","parent","block","name","parseInt","len","type","console","log","buttonsubmit","updateInventory","buttonText","borderlessButtonContainer","navigate","StyleSheet","create","flex","backgroundColor","paddingHorizontal","alignItems","fontSize","fontWeight","color","orange","paddingTop","textAlign","button","width","height","marginTop","padding","borderRadius","marginRight","justifyContent","alignSelf","buttontaken","black","borderColor","white","borderWidth","marginVertical","flexDirection","alignContent","margin"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAiCC,SAAjC,QAAmD,OAAnD;;;;;AAEA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,gBAAvB;AACA,SAASC,MAAT,EAAiBC,EAAjB;AACA,SAASC,MAAT,QAAuB,6BAAvB;AACA,SAASC,WAAT,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,MAAhC,EAAwCC,KAAxC,EAA+CC,GAA/C,EAAoDC,OAApD,QAAmE,mBAAnE;AACA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,SAA9B,EAAyCC,GAAzC,EAA8CC,KAA9C,EAAqDC,KAArD,QAAkE,oBAAlE;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,UAAT,QAA2B,8BAA3B;AAEA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,OAAoB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAC7C,kBAA8BzB,QAAQ,CAAC,CAAD,CAAtC;AAAA;AAAA,MAAO0B,OAAP;AAAA,MAAgBC,UAAhB;;AACAC,EAAAA,MAAM,CAACC,UAAP,CAAkB,CAAC,iBAAD,CAAlB;;AACA,mBAA0B7B,QAAQ,CAAC,SAAD,CAAlC;AAAA;AAAA,MAAO8B,KAAP;AAAA,MAAcC,QAAd;;AACA,MAAMC,GAAG,GAAG,CAAZ;;AACA,mBAAwBhC,QAAQ,CAAC,EAAD,CAAhC;AAAA;AAAA,MAAOiC,IAAP;AAAA,MAAaC,OAAb;;AAEA,mBAA0BlC,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAOmC,KAAP;AAAA,MAAcC,QAAd;;AAGA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAAOC,KAAP,EAAaC,MAAb,EAAoBC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,YAAAA,MADW,GACFtB,GAAG,CAACZ,EAAD,EAAK,2BAAL,EAAkCgC,MAAlC,CADD;AAAA;AAAA,6CAEXrB,SAAS,CAACuB,MAAD,sBACZD,IADY,EACJF,KADI,EAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAYC,WAASI,SAAT,CAAmBC,QAAnB,EAA4B;AAC3B,YAAOA,QAAP;AACE,WAAK,IAAL;AAAW,eAAOC,MAAM,CAACC,UAAd;AAA2B;;AACtC,WAAK,KAAL;AAAY,eAAOD,MAAM,CAACE,eAAd;AAAgC;AAF9C;AAID;;AAAA;;AAED,WAASC,WAAT,GAAuB;AACrBC,IAAAA,QAAQ,CAAC,aAAD,CAAR;AACD;;AAGD9C,EAAAA,SAAS,CAAC,YAAM;AACd,QAAM+C,YAAY,GAAG,SAAfA,YAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACahC,OAAO,CAACD,UAAU,CAACT,EAAD,EAAK,WAAL,CAAX,CADpB;;AAAA;AACb2C,cAAAA,iBADa;AAEbC,cAAAA,aAFa,GAEGD,iBAAiB,CAACE,IAAlB,CAAuBC,GAAvB,CAA2B,UAAClC,GAAD;AAAA,uBAASA,GAAG,CAACc,IAAJ,EAAT;AAAA,eAA3B,CAFH;AAGnBC,cAAAA,OAAO,CAACiB,aAAD,CAAP;;AAHmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAArB;;AAMFF,IAAAA,YAAY;;AACZ,QAAMK,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACUrC,OAAO,CAACD,UAAU,CAACT,EAAD,EAAK,2BAAL,CAAX,CADjB;;AAAA;AACXgD,cAAAA,YADW;AAEXC,cAAAA,QAFW,GAEAD,YAAY,CAACH,IAAb,CAAkBC,GAAlB,CAAsB,UAAClC,GAAD;AAAA,uBAASA,GAAG,CAACc,IAAJ,EAAT;AAAA,eAAtB,CAFA;AAGjBG,cAAAA,QAAQ,CAACoB,QAAD,CAAR;;AAHiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAnB;;AAMAF,IAAAA,UAAU;AAGX,GAjBU,EAiBR,EAjBQ,CAAT;AAmBA,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEV,MAAM,CAACa;AAApB,KACA,oBAAC,UAAD,QACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEb,MAAM,CAACc;AAApB,iBADF,EAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAGd,MAAM,CAACe;AAArB,qBAHF,EAIE,oBAAC,MAAD;AACE,IAAA,aAAa,EAAE7B,KADjB;AAEE,IAAA,aAAa,EAAE,uBAAC8B,KAAD,EAAQC,KAAR;AAAA,aAAkB9B,QAAQ,CAAC6B,KAAD,CAA1B;AAAA,KAFjB;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,KAAK,EAAEhB,MAAM,CAACkB;AAJhB,KAME,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,0BAAnB;AAA8C,IAAA,KAAK,EAAC;AAApD,IANF,EAOE,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,eAAnB;AAAmC,IAAA,KAAK,EAAC;AAAzC,IAPF,EAQE,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,eAAnB;AAAmC,IAAA,KAAK,EAAC;AAAzC,IARF,CAJF,EAiBC3B,KAAK,CAACkB,GAAN,CAAU,UAAClB,KAAD,EAAO4B,MAAP,EAAcC,MAAd,EAAqBC,MAArB;AAAA,WACT,oBAAC,KAAD,CAAO,QAAP,QACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAIrB,MAAM,CAACsB;AAAtB,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAItB,MAAM,CAACuB;AAAtB,gBAAsCJ,MAAM,GAAG,CAA/C,MADF,EAEE,oBAAC,MAAD;AAAS,MAAA,GAAG,EAAI5B,KAAhB;AAAuB,MAAA,KAAK,EAAIO,SAAS,CAACP,KAAK,CAACiC,CAAP,CAAzC;AAAqD,MAAA,OAAO,GAAI;AAAA,eAAO/B,UAAU,CAAC,KAAD,EAAQ,SAAS0B,MAAM,GAAG,CAAlB,CAAR,EAA6B,GAA7B,CAAjB;AAAA,SAAmDhB,WAAW,EAAlE;AAA5D,MAFF,EAGE,oBAAC,MAAD;AAAS,MAAA,GAAG,EAAIgB,MAAhB;AAAwB,MAAA,KAAK,EAAIrB,SAAS,CAACP,KAAK,CAACkC,CAAP,CAA1C;AAAqD,MAAA,OAAO,EAAI;AAAA,eAAOhC,UAAU,CAAC,KAAD,EAAQ,SAAS0B,MAAM,GAAG,CAAlB,CAAR,EAA6B,GAA7B,CAAjB;AAAA;AAAhE,MAHF,EAIE,oBAAC,MAAD;AAAS,MAAA,GAAG,EAAIC,MAAhB;AAAwB,MAAA,KAAK,EAAItB,SAAS,CAACP,KAAK,CAACmC,CAAP,CAA1C;AAAqD,MAAA,OAAO,EAAI;AAAA,eAAOjC,UAAU,CAAC,KAAD,EAAQ,SAAS0B,MAAM,GAAG,CAAlB,CAAR,EAA6B,GAA7B,CAAjB;AAAA;AAAhE,MAJF,EAKE,oBAAC,MAAD;AAAS,MAAA,GAAG,EAAIE,MAAhB;AAAwB,MAAA,KAAK,EAAIvB,SAAS,CAACP,KAAK,CAACoC,CAAP,CAA1C;AAAqD,MAAA,OAAO,EAAI;AAAA,eAAOlC,UAAU,CAAC,KAAD,EAAQ,SAAS0B,MAAM,GAAG,CAAlB,CAAR,EAA6B,GAA7B,CAAjB;AAAA;AAAhE,MALF,CADF,CADS;AAAA,GAAV,CAjBD,EA6BC9B,IAAI,CAACoB,GAAL,CAAS,UAACpB,IAAD,EAAMuC,GAAN;AAAA,WACN,oBAAC,KAAD,CAAO,QAAP,QACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAI5B,MAAM,CAAC6B;AAAtB,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAI7B,MAAM,CAAC8B;AAAtB,OACE,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAIzC,IAAb;AAAmB,MAAA,KAAK,EAAIW,MAAM,CAACuB;AAAnC,YAA+ClC,IAAI,CAAC0C,IAApD,CADF,CADF,EAKE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAI/B,MAAM,CAAC8B;AAAtB,OAEE,oBAAC,OAAD;AAAU,MAAA,KAAK,EAAIE,QAAQ,CAAC,CAAD,CAA3B;AAAgC,MAAA,GAAG,EAAIA,QAAQ,CAAC3C,IAAI,CAACuC,GAAN,CAA/C;AAA4D,MAAA,QAAQ,EAAE,kBAACK,GAAD,EAAMC,IAAN,EAAe;AACnFC,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ,EAAiBC,IAAjB;AACAN,QAAAA,GAAG,GAAGK,GAAN;AACD;AAHD,MAFF,CALF,CADF,CADM;AAAA,GAAT,CA7BD,EAqDC,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAEjC,MAAM,CAACqC,YAAtB;AAAqC,IAAA,OAAO,EAAI;AAAA,aAAMC,eAAe,CAACjD,IAAI,CAAC0C,IAAN,EAAYH,GAAZ,CAArB;AAAA;AAAhD,KACA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE5B,MAAM,CAACuC;AAApB,oBADA,CArDD,EAyDE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAEvC,MAAM,CAACwC,yBAAtB;AAAiD,IAAA,UAAU,MAA3D;AACE,IAAA,KAAK,EAAE,cADT;AAEA,IAAA,OAAO,EAAI;AAAA,aAAM3D,UAAU,CAAC4D,QAAX,CAAoB,oBAApB,CAAN;AAAA;AAFX,IAzDF,CADA,CADF;AAiED,CAtHM;AAwHP,IAAMzC,MAAM,GAAG0C,UAAU,CAACC,MAAX,CAAkB;AAC/B9B,EAAAA,SAAS,EAAE;AACZ+B,IAAAA,IAAI,EAAE,CADM;AAETC,IAAAA,eAAe,EAAE,OAFR;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,UAAU,EAAE;AAJH,GADoB;AAO/BjC,EAAAA,WAAW,EAAE;AACXkC,IAAAA,QAAQ,EAAE,EADC;AAEXC,IAAAA,UAAU,EAAE,KAFD;AAGXC,IAAAA,KAAK,EAAExF,MAAM,CAACyF,MAHH;AAIXC,IAAAA,UAAU,EAAE,EAJD;AAKXC,IAAAA,SAAS,EAAE;AALA,GAPkB;AAc/BtC,EAAAA,IAAI,EAAE;AACJiC,IAAAA,QAAQ,EAAE,EADN;AAEJC,IAAAA,UAAU,EAAE,KAFR;AAGJC,IAAAA,KAAK,EAAExF,MAAM,CAACyF,MAHV;AAIJC,IAAAA,UAAU,EAAE,EAJR;AAKJC,IAAAA,SAAS,EAAE;AALP,GAdyB;AAqB/BC,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE,KADD;AAENC,IAAAA,MAAM,EAAE,EAFF;AAGNC,IAAAA,SAAS,EAAE,CAHL;AAILV,IAAAA,UAAU,EAAE,QAJP;AAMNF,IAAAA,eAAe,EAAEnF,MAAM,CAACyF,MANlB;AAONO,IAAAA,OAAO,EAAE,EAPH;AAQNC,IAAAA,YAAY,EAAE,CARR;AASNC,IAAAA,WAAW,EAAC;AATN,GArBuB;AAgC9BvB,EAAAA,YAAY,EAAE;AACdkB,IAAAA,KAAK,EAAE,KADO;AAEbM,IAAAA,cAAc,EAAE,QAFH;AAGbd,IAAAA,UAAU,EAAE,QAHC;AAIbe,IAAAA,SAAS,EAAE,QAJE;AAKbL,IAAAA,SAAS,EAAE,CALE;AAMbZ,IAAAA,eAAe,EAAEnF,MAAM,CAACyF,MANX;AAObO,IAAAA,OAAO,EAAE,EAPI;AAQbC,IAAAA,YAAY,EAAE;AARD,GAhCgB;AA0C/BI,EAAAA,WAAW,EAAE;AACXR,IAAAA,KAAK,EAAE,KADI;AAEXC,IAAAA,MAAM,EAAE,EAFG;AAGXC,IAAAA,SAAS,EAAE,CAHA;AAIXZ,IAAAA,eAAe,EAAEnF,MAAM,CAACsG,KAJb;AAKXC,IAAAA,WAAW,EAAEvG,MAAM,CAACwG,KALT;AAMXR,IAAAA,OAAO,EAAE,EANE;AAOXS,IAAAA,WAAW,EAAC,CAPD;AAQXR,IAAAA,YAAY,EAAC,CARF;AASXC,IAAAA,WAAW,EAAC,CATD;AAUXb,IAAAA,UAAU,EAAE,QAVD;AAWXc,IAAAA,cAAc,EAAE;AAXL,GA1CkB;AAwD/BtB,EAAAA,UAAU,EAAE;AACVS,IAAAA,QAAQ,EAAE,EADA;AAEVE,IAAAA,KAAK,EAAExF,MAAM,CAACwG,KAFJ;AAGVjB,IAAAA,UAAU,EAAE;AAHF,GAxDmB;AA8D/BT,EAAAA,yBAAyB,EAAE;AACzBiB,IAAAA,SAAS,EAAE,EADc;AAEzBV,IAAAA,UAAU,EAAE;AAFa,GA9DI;AAkE/B7B,EAAAA,MAAM,EAAE;AACNkD,IAAAA,cAAc,EAAE,EADV;AAENb,IAAAA,KAAK,EAAE,GAFD;AAGNG,IAAAA,OAAO,EAAE,EAHH;AAINS,IAAAA,WAAW,EAAE,CAJP;AAKNjB,IAAAA,KAAK,EAAExF,MAAM,CAACsG,KALR;AAMNnB,IAAAA,eAAe,EAAE;AANX,GAlEuB;AA0EhCvB,EAAAA,cAAc,EAAE;AAChB+C,IAAAA,aAAa,EAAE,KADC;AAEhBzB,IAAAA,IAAI,EAAE,CAFU;AAGhB0B,IAAAA,YAAY,EAAE,cAHE;AAIhBZ,IAAAA,OAAO,EAAE;AAJO,GA1EgB;AAgFjCzD,EAAAA,UAAU,EAAE;AACRsD,IAAAA,KAAK,EAAE,KADC;AAERC,IAAAA,MAAM,EAAE,EAFA;AAGRC,IAAAA,SAAS,EAAE,CAHH;AAIRZ,IAAAA,eAAe,EAAEnF,MAAM,CAACyF,MAJhB;AAKRO,IAAAA,OAAO,EAAE,EALD;AAMRC,IAAAA,YAAY,EAAE,CANN;AAORC,IAAAA,WAAW,EAAC;AAPJ,GAhFqB;AAyFjC1D,EAAAA,eAAe,EAAE;AACbqD,IAAAA,KAAK,EAAE,KADM;AAEbC,IAAAA,MAAM,EAAE,EAFK;AAGbC,IAAAA,SAAS,EAAE,CAHE;AAIbZ,IAAAA,eAAe,EAAEnF,MAAM,CAACsG,KAJX;AAKbC,IAAAA,WAAW,EAAEvG,MAAM,CAACwG,KALP;AAMbR,IAAAA,OAAO,EAAE,CANI;AAObS,IAAAA,WAAW,EAAC,CAPC;AAQbR,IAAAA,YAAY,EAAC,CARA;AASbC,IAAAA,WAAW,EAAC,CATC;AAUbb,IAAAA,UAAU,EAAE,QAVC;AAWbc,IAAAA,cAAc,EAAE;AAXH,GAzFgB;AAsGjCtC,EAAAA,QAAQ,EAAE;AACNyB,IAAAA,QAAQ,EAAE,EADJ;AAENC,IAAAA,UAAU,EAAE,KAFN;AAGNC,IAAAA,KAAK,EAAE;AAHD,GAtGuB;AA2GjCrB,EAAAA,MAAM,EAAE;AAENwC,IAAAA,aAAa,EAAE;AAFT,GA3GyB;AAgHjCvC,EAAAA,KAAK,EAAE;AACLc,IAAAA,IAAI,EAAE,CADD;AAEL2B,IAAAA,MAAM,EAAE;AAFH;AAhH0B,CAAlB,CAAf","sourcesContent":["import React, { useState, useRef,useEffect  } from 'react';\r\nimport { Text, StyleSheet, SafeAreaView, LogBox  } from 'react-native';\r\nimport { View, Button, FormErrorMessage } from '../components';\r\nimport { Colors, db} from '../config';\r\nimport { Picker } from \"@react-native-picker/picker\";\r\nimport { getDatabase, ref, set, update, child, get, onValue } from \"firebase/database\";\r\nimport { collection, getDocs, updateDoc, doc, query, where } from \"firebase/firestore\"; \r\nimport Counter from \"react-native-counters\";\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\n\r\nexport const OrderScreen = ({ navigation }) => {\r\n  const [counter, setCounter] = useState(0);\r\n  LogBox.ignoreLogs(['Setting a timer']);\r\n  const [order, setOrder] = useState('Unknown');\r\n  const COL = 5;\r\n  const [data, setData] = useState([]);\t\r\n  \r\n  const [seats, setSeats] = useState([]);\t\r\n\r\n  \r\n  const updateSeat = async (taken,rowNum,seat) => {\r\n    const DocRef = doc(db, \"Theaters/Seating/Theater1\", rowNum);\r\n    await updateDoc(DocRef, {\r\n      [seat] : taken\r\n    });\r\n   \r\n    \r\n  };\r\n\r\n\r\n  \r\n  \r\n   function seatTaken(position){\r\n    switch(position){\r\n      case true: return(styles.seatButton); break;\r\n      case false: return(styles.seatButtonTaken); break;\r\n    }\r\n  };\r\n\r\n  function handleClick (){\r\n    setState('buttontaken')\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const getInventory = async () => {\r\n      const inventorySnapshot = await getDocs(collection(db, \"Inventory\"));\r\n      const inventoryList = inventorySnapshot.docs.map((doc) => doc.data());\r\n      setData(inventoryList);\r\n     // console.log(inventoryList);\r\n  };\r\n  getInventory();\r\n  const getSeating = async () => {\r\n    const seatSnapshot = await getDocs(collection(db, \"Theaters/Seating/Theater1\"));\r\n    const seatList = seatSnapshot.docs.map((doc) => doc.data());\r\n    setSeats(seatList);\r\n   //console.log(seatList);\r\n  };\r\n  getSeating();\r\n\r\n\r\n}, [])\r\n\r\n  return (   \r\n    <View style={styles.container}>\r\n    <ScrollView>\r\n      <Text style={styles.screenTitle}>New Order</Text>\r\n    {/* Theater Selection */} \r\n      <Text style ={styles.text}> Ticket Order</Text>\r\n      <Picker\r\n        selectedValue={order}\r\n        onValueChange={(value, index) => setOrder(value)}\r\n        mode=\"dropdown\" // Android only\r\n        style={styles.picker}\r\n      >\r\n        <Picker.Item label=\"Please select your Order\" value=\"Unknown\" />\r\n        <Picker.Item label=\"Theater 1 5PM\" value=\"Theater 1\" />\r\n        <Picker.Item label=\"Theater 2 5PM\" value=\"Theater 2\" />\r\n      </Picker>\r\n\t\r\n\t\r\n    {/* Seat Animation */}\t\r\n    {seats.map((seats,index1,index2,index3) =>(\r\n      <React.Fragment>\r\n        <View style = {styles.containerseats}>\r\n          <Text style = {styles.itemText}> Row {index1 + 1} </Text>\r\n          <Button  key = {seats} style = {seatTaken(seats.A)}  onPress = {() =>  updateSeat(false, 'Row' + (index1 + 1),'A'),handleClick()}/>\r\n          <Button  key = {index1} style = {seatTaken(seats.B)} onPress = {() =>  updateSeat(false, 'Row' + (index1 + 1),'B')}/>\r\n          <Button  key = {index2} style = {seatTaken(seats.C)} onPress = {() =>  updateSeat(false, 'Row' + (index1 + 1),'C')}/>\r\n          <Button  key = {index3} style = {seatTaken(seats.D)} onPress = {() =>  updateSeat(false, 'Row' + (index1 + 1),'D')} />\r\n        </View>\r\n      </React.Fragment> \r\n    ))}\r\n\t{/* Food order */}\r\n    {data.map((data,qty) =>(\r\n        <React.Fragment>\r\n          <View style = {styles.parent}>\r\n            <View style = {styles.block}>\r\n              <Text key = {data} style = {styles.itemText}> {data.name}</Text>            \r\n\r\n            </View>\r\n            <View style = {styles.block} >\r\n              \r\n              <Counter  start = {parseInt(0)} max = {parseInt(data.qty)}  onChange={(len, type) => {\r\n                console.log(len, type);\r\n                qty = len;\r\n              }} />\r\n            </View>\r\n\r\n          </View>\r\n        </React.Fragment>\r\n        \r\n           \r\n      ))}\r\n\r\n\r\n\t\r\n    {/* Buttons */}\r\n     <Button style={styles.buttonsubmit}  onPress = {() => updateInventory(data.name, qty)}>\r\n     <Text style={styles.buttonText}>Submit Order</Text>\r\n      </Button>\r\n      \r\n      <Button style={styles.borderlessButtonContainer} borderless\r\n        title={'Cancel Order'}\r\n      onPress = {() => navigation.navigate('CustomerHomeScreen')} />\r\n    </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n        \r\nconst styles = StyleSheet.create({\r\n  container: {\r\n\tflex: 1,\r\n    backgroundColor: 'black',\r\n    paddingHorizontal: 12,\r\n    alignItems: 'center'\r\n  },\r\n  screenTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '700',\r\n    color: Colors.orange,\r\n    paddingTop: 10,\r\n    textAlign: 'center',\r\n  },\r\n  text: {\r\n    fontSize: 18,\r\n    fontWeight: '700',\r\n    color: Colors.orange,\r\n    paddingTop: 10,\r\n    textAlign: 'center',\r\n  },\r\n  button: {\r\n    width: '10%',\r\n    height: 18,\r\n    marginTop: 8,   \r\n     alignItems: 'center',\r\n\r\n    backgroundColor: Colors.orange,\r\n    padding: 10,\r\n    borderRadius: 8,\r\n    marginRight:8\r\n  },\r\n   buttonsubmit: {\r\n   width: '50%',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    alignSelf: 'center',\r\n    marginTop: 8,\r\n    backgroundColor: Colors.orange,\r\n    padding: 10,\r\n    borderRadius: 8,\r\n  },\r\n  buttontaken: {\r\n    width: '10%',\r\n    height: 18,\r\n    marginTop: 8,\r\n    backgroundColor: Colors.black,\r\n   \tborderColor: Colors.white,\r\n    padding: 10,\r\n    borderWidth:2,\r\n    borderRadius:8,\r\n    marginRight:8,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n\r\n  },\r\n  buttonText: {\r\n    fontSize: 20,\r\n    color: Colors.white,\r\n    fontWeight: '700',\r\n\r\n  },\r\n  borderlessButtonContainer: {\r\n    marginTop: 16, \r\n    alignItems: 'center',\r\n  },\r\n  picker: {\r\n    marginVertical: 30,\r\n    width: 300,\r\n    padding: 10,\r\n    borderWidth: 5,\r\n    color: Colors.black,\r\n    backgroundColor: 'white',\r\n \t},\r\n containerseats: {\r\n\tflexDirection: 'row',\r\n\tflex: 1,\r\n\talignContent: 'space-around',\r\n\tpadding: 5\r\n},\r\nseatButton: {\r\n    width: '10%',\r\n    height: 18,\r\n    marginTop: 8,\r\n    backgroundColor: Colors.orange,\r\n    padding: 10,\r\n    borderRadius: 8,\r\n    marginRight:8\r\n},\r\nseatButtonTaken: {\r\n    width: '10%',\r\n    height: 18,\r\n    marginTop: 8,\r\n    backgroundColor: Colors.black,\r\n   \tborderColor: Colors.white,\r\n    padding: 9,\r\n    borderWidth:2,\r\n    borderRadius:8,\r\n    marginRight:8,\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n},\r\nitemText: {\r\n    fontSize: 20,\r\n    fontWeight: '500',\r\n    color: '#ff9361',\r\n},\r\nparent: {\r\n    \r\n  flexDirection: \"row\",\r\n  \r\n},\r\nblock: {\r\n  flex: 3,\r\n  margin: 6,\r\n},\r\n  });"]},"metadata":{},"sourceType":"module"}