{"version":3,"sources":["../../src/tools/ArtifactUtils.ts"],"names":["writeArtifactSafelyAsync","projectRoot","keyName","artifactPath","artifact","pathToWrite","path","resolve","fs","existsSync","dirname","errorMsg","logger","global","warn","writeFile"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEO,eAAeA,wBAAf,CACLC,WADK,EAELC,OAFK,EAGLC,YAHK,EAILC,QAJK,EAKL;AACA,QAAMC,WAAW,GAAGC,gBAAKC,OAAL,CAAaN,WAAb,EAA0BE,YAA1B,CAApB;;AACA,MAAI,CAACK,mBAAGC,UAAH,CAAcH,gBAAKI,OAAL,CAAaL,WAAb,CAAd,CAAL,EAA+C;AAC7C,UAAMM,QAAQ,GAAGT,OAAO,GACnB,uBAAsBG,WAAY,sCADf,GAEnB,sBAAqBH,OAAQ,KAAIG,WAAY,sCAFlD;;AAGAO,uBAAOC,MAAP,CAAcC,IAAd,CAAmBH,QAAnB;AACD,GALD,MAKO;AACL,UAAMH,mBAAGO,SAAH,CAAaV,WAAb,EAA0BD,QAA1B,CAAN;AACD;AACF","sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\n\nimport { Logger as logger } from '../internal';\n\nexport async function writeArtifactSafelyAsync(\n  projectRoot: string,\n  keyName: string | null,\n  artifactPath: string,\n  artifact: string | Uint8Array\n) {\n  const pathToWrite = path.resolve(projectRoot, artifactPath);\n  if (!fs.existsSync(path.dirname(pathToWrite))) {\n    const errorMsg = keyName\n      ? `app.json specifies: ${pathToWrite}, but that directory does not exist.`\n      : `app.json specifies ${keyName}: ${pathToWrite}, but that directory does not exist.`;\n    logger.global.warn(errorMsg);\n  } else {\n    await fs.writeFile(pathToWrite, artifact);\n  }\n}\n"],"file":"ArtifactUtils.js"}