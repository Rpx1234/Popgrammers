{"version":3,"sources":["../../../src/commands/utils/maybeBailOnGitStatusAsync.ts"],"names":["EXPO_NO_GIT_STATUS","maybeBailOnGitStatusAsync","Log","warn","isGitStatusClean","program","nonInteractive","addNewLineIfNone","answer","message","newLine"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEA,MAAMA,kBAAkB,GAAG,uBAAQ,oBAAR,EAA8B,KAA9B,CAA3B;;AAEe,eAAeC,yBAAf,GAA6D;AAC1E,MAAID,kBAAJ,EAAwB;AACtBE,mBAAIC,IAAJ,CACE,4FADF;;AAGA,WAAO,KAAP;AACD;;AACD,QAAMC,gBAAgB,GAAG,MAAM,6CAA/B,CAP0E,CAS1E;;AACA,MAAI,CAACA,gBAAL,EAAuB;AACrB,QAAIC,qBAAQC,cAAZ,EAA4B;AAC1BJ,qBAAIC,IAAJ,CACG,sFADH;;AAGA,aAAO,KAAP;AACD;;AAEDD,mBAAIK,gBAAJ;;AACA,UAAMC,MAAM,GAAG,MAAM,6BAAa;AAChCC,MAAAA,OAAO,EAAG;AADsB,KAAb,CAArB;;AAIA,QAAI,CAACD,MAAL,EAAa;AACX,aAAO,IAAP;AACD;;AAEDN,mBAAIQ,OAAJ;AACD;;AACD,SAAO,KAAP;AACD","sourcesContent":["import program from 'commander';\nimport { boolish } from 'getenv';\n\nimport Log from '../../log';\nimport { confirmAsync } from '../../utils/prompts';\nimport { validateGitStatusAsync } from './ProjectUtils';\n\nconst EXPO_NO_GIT_STATUS = boolish('EXPO_NO_GIT_STATUS', false);\n\nexport default async function maybeBailOnGitStatusAsync(): Promise<boolean> {\n  if (EXPO_NO_GIT_STATUS) {\n    Log.warn(\n      'Git status is dirty but the command will continue because EXPO_NO_GIT_STATUS is enabled...'\n    );\n    return false;\n  }\n  const isGitStatusClean = await validateGitStatusAsync();\n\n  // Give people a chance to bail out if git working tree is dirty\n  if (!isGitStatusClean) {\n    if (program.nonInteractive) {\n      Log.warn(\n        `Git status is dirty but the command will continue because nonInteractive is enabled.`\n      );\n      return false;\n    }\n\n    Log.addNewLineIfNone();\n    const answer = await confirmAsync({\n      message: `Would you like to proceed?`,\n    });\n\n    if (!answer) {\n      return true;\n    }\n\n    Log.newLine();\n  }\n  return false;\n}\n"],"file":"maybeBailOnGitStatusAsync.js"}