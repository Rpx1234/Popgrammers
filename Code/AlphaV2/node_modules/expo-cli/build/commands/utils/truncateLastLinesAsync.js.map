{"version":3,"sources":["../../../src/commands/utils/truncateLastLinesAsync.ts"],"names":["truncateLastLinesAsync","filePath","n","lines","size","Promise","all","readLastLines","read","fs","promises","stat","toTruncate","length","truncate"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEA;AACO,eAAeA,sBAAf,CAAsCC,QAAtC,EAAwDC,CAAxD,EAAmE;AACxE,QAAM,CAACC,KAAD,EAAQ;AAAEC,IAAAA;AAAF,GAAR,IAAoB,MAAMC,OAAO,CAACC,GAAR,CAAY,CAC1CC,yBAAcC,IAAd,CAAmBP,QAAnB,EAA6BC,CAA7B,CAD0C,EAE1CO,cAAGC,QAAH,CAAYC,IAAZ,CAAiBV,QAAjB,CAF0C,CAAZ,CAAhC;AAIA,QAAMW,UAAU,GAAGT,KAAK,CAACU,MAAzB;AACA,QAAMJ,cAAGC,QAAH,CAAYI,QAAZ,CAAqBb,QAArB,EAA+BG,IAAI,GAAGQ,UAAtC,CAAN;AACD","sourcesContent":["import fs from 'fs';\nimport readLastLines from 'read-last-lines';\n\n// truncate the last n lines in a file\nexport async function truncateLastLinesAsync(filePath: string, n: number) {\n  const [lines, { size }] = await Promise.all([\n    readLastLines.read(filePath, n),\n    fs.promises.stat(filePath),\n  ]);\n  const toTruncate = lines.length;\n  await fs.promises.truncate(filePath, size - toTruncate);\n}\n"],"file":"truncateLastLinesAsync.js"}