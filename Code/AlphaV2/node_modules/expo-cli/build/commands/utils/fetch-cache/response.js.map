{"version":3,"sources":["../../../../src/commands/utils/fetch-cache/response.ts"],"names":["responseInternalSymbol","Object","getOwnPropertySymbols","Response","NFCResponse","constructor","bodyStream","metaData","ejectFromCache","ejectSelfFromCache","fromCache","serializeMetaFromNodeFetchResponse","res","url","status","statusText","headers","raw","size","timeout","counter"],"mappings":";;;;;;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA,MAAMA,sBAAsB,GAAGC,MAAM,CAACC,qBAAP,CAA6B,KAAIC,qBAAJ,GAA7B,EAA6C,CAA7C,CAA/B;;AAEO,MAAMC,WAAN,SAA0BD,qBAA1B,CAAmC;AACxCE,EAAAA,WAAW,CACTC,UADS,EAETC,QAFS,EAGFC,cAAyD,GAAG,SAASA,cAAT,GAEjE;AACA,WAAO,KAAKC,kBAAL,EAAP;AACD,GAPQ,EAQFC,SAAkB,GAAG,KARnB,EAST;AACA,UAAMJ,UAAN,EAAkBC,QAAlB;AADA,SANOC,cAMP,GANOA,cAMP;AAAA,SADOE,SACP,GADOA,SACP;AAED;;AAEwC,SAAlCC,kCAAkC,CAACC,GAAD,EAAgB;AACvD,UAAML,QAAQ,GAAG;AACfM,MAAAA,GAAG,EAAED,GAAG,CAACC,GADM;AAEfC,MAAAA,MAAM,EAAEF,GAAG,CAACE,MAFG;AAGfC,MAAAA,UAAU,EAAEH,GAAG,CAACG,UAHD;AAIfC,MAAAA,OAAO,EAAEJ,GAAG,CAACI,OAAJ,CAAYC,GAAZ,EAJM;AAKfC,MAAAA,IAAI,EAAEN,GAAG,CAACM,IALK;AAMfC,MAAAA,OAAO,EAAEP,GAAG,CAACO,OANE;AAOf;AACAC,MAAAA,OAAO,EAAER,GAAG,CAACZ,sBAAD,CAAH,CAA4BoB;AARtB,KAAjB;AAWA,WAAOb,QAAP;AACD;;AA3BuC","sourcesContent":["import { CacheObject } from 'cacache';\nimport { BodyInit, Response, ResponseInit } from 'node-fetch';\n\nconst responseInternalSymbol = Object.getOwnPropertySymbols(new Response())[1];\n\nexport class NFCResponse extends Response {\n  constructor(\n    bodyStream?: BodyInit,\n    metaData?: ResponseInit,\n    public ejectFromCache: () => Promise<[CacheObject, CacheObject]> = function ejectFromCache(\n      this: any\n    ) {\n      return this.ejectSelfFromCache();\n    },\n    public fromCache: boolean = false\n  ) {\n    super(bodyStream, metaData);\n  }\n\n  static serializeMetaFromNodeFetchResponse(res: Response) {\n    const metaData = {\n      url: res.url,\n      status: res.status,\n      statusText: res.statusText,\n      headers: res.headers.raw(),\n      size: res.size,\n      timeout: res.timeout,\n      // @ts-ignore\n      counter: res[responseInternalSymbol].counter,\n    };\n\n    return metaData;\n  }\n}\n"],"file":"response.js"}