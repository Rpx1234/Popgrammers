{"version":3,"sources":["../../../src/commands/publish/publishRollbackAsync.ts"],"names":["actionAsync","projectRoot","options","channelId","releaseChannel","sdkVersion","usage","CommandError","platform"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AASO,eAAeA,WAAf,CAA2BC,WAA3B,EAAgDC,OAAhD,EAAkE;AACvE,yBACE,CAACA,OAAO,CAACC,SADX,EAEE,mHAFF;;AAKA,MAAI,CAACD,OAAO,CAACE,cAAT,IAA2B,CAACF,OAAO,CAACG,UAAxC,EAAoD;AAClD,UAAMC,KAAK,GAAG,MAAM,oCAAcL,WAAd,CAApB;AACA,UAAM,KAAIM,uBAAJ,EAAiBD,KAAjB,CAAN;AACD;;AACD,MAAIJ,OAAO,CAACM,QAAZ,EAAsB;AACpB,QAAIN,OAAO,CAACM,QAAR,KAAqB,SAArB,IAAkCN,OAAO,CAACM,QAAR,KAAqB,KAA3D,EAAkE;AAChE,YAAM,KAAID,uBAAJ,EACJ,+FADI,CAAN;AAGD;AACF;;AACD,QAAM,yDAAoCN,WAApC,EAAiDC,OAAjD,CAAN;AACD","sourcesContent":["import assert from 'assert';\n\nimport CommandError from '../../CommandError';\nimport { RollbackOptions, rollbackPublicationFromChannelAsync } from '../utils/PublishUtils';\nimport { getUsageAsync } from './getUsageAsync';\n\ntype Options = {\n  releaseChannel?: string;\n  sdkVersion?: string;\n  platform?: string;\n  channelId?: string;\n};\n\nexport async function actionAsync(projectRoot: string, options: Options) {\n  assert(\n    !options.channelId,\n    '--channel-id flag is deprecated and does not do anything. Please use --release-channel and --sdk-version instead.'\n  );\n\n  if (!options.releaseChannel || !options.sdkVersion) {\n    const usage = await getUsageAsync(projectRoot);\n    throw new CommandError(usage);\n  }\n  if (options.platform) {\n    if (options.platform !== 'android' && options.platform !== 'ios') {\n      throw new CommandError(\n        'Platform must be either android or ios. Leave out the platform flag to target both platforms.'\n      );\n    }\n  }\n  await rollbackPublicationFromChannelAsync(projectRoot, options as RollbackOptions);\n}\n"],"file":"publishRollbackAsync.js"}