{"version":3,"sources":["../../src/commands/upload.ts"],"names":["logMigration","platform","Log","newLine","log","chalk","bold","dim","TerminalLink","learnMore","cyan","linkedText","program","migrateToEasJsonProperty","named","migrateToEasCliArg","cmd","command","alias","description","yellow","helpGroup","option","actionAsync"],"mappings":"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","sourcesContent":["import chalk from 'chalk';\nimport type { Command } from 'commander';\n\nimport Log from '../log';\nimport * as TerminalLink from './utils/TerminalLink';\nimport { applyAsyncActionProjectDir } from './utils/applyAsyncAction';\n\nfunction logMigration(platform: string) {\n  Log.newLine();\n  Log.log(\n    `${chalk.bold(\n      `expo upload:${platform}`\n    )} has been superseded by ${chalk.bold`eas submit`}. ${chalk.dim(\n      TerminalLink.learnMore(`https://expo.fyi/expo-upload-${platform}`)\n    )}`\n  );\n  Log.newLine();\n  Log.log('Run the following:');\n  Log.newLine();\n  Log.log('\\u203A ' + chalk.cyan.bold('npm install -g eas-cli'));\n  Log.log(\n    `\\u203A ${TerminalLink.linkedText(\n      chalk.cyan.bold(`eas submit -p ${platform}`),\n      `https://docs.expo.dev/submit/${platform}`\n    )}`\n  );\n  Log.newLine();\n}\n\n// TODO: Drop this entire command category in mid to late 2022\nexport default function (program: Command) {\n  const migrateToEasJsonProperty = (named: string) =>\n    `Migrate to ${chalk.bold`eas.json`}'s ${chalk.bold(named)} property`;\n  const migrateToEasCliArg = (cmd: string) => `Migrate to ${chalk.bold(`eas submit ${cmd}`)}`;\n\n  applyAsyncActionProjectDir(\n    program\n      .command('upload:android [path]')\n      .alias('ua')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas submit`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--verbose', migrateToEasCliArg('--verbose'))\n      .option('--latest', migrateToEasCliArg('--latest'))\n      .option('--id <id>', migrateToEasCliArg('--id <id>'))\n      .option('--path [path]', migrateToEasCliArg('--path <path>'))\n      .option('--url <url>', migrateToEasCliArg('--url <url>'))\n      .option(\n        '--android-package <android-package>',\n        `Migrate to ${chalk.bold`eas submit`} (android-package is auto inferred)`\n      )\n      .option(\n        '--type <archive-type>',\n        `Migrate to ${chalk.bold`eas submit`} (type is auto inferred)`\n      )\n      .option('--key <key>', migrateToEasJsonProperty('serviceAccountKeyPath'))\n      .option('--track <track>', migrateToEasJsonProperty('track'))\n      .option('--release-status <release-status>', migrateToEasJsonProperty('releaseStatus')),\n    async () => ({\n      async actionAsync() {\n        logMigration('android');\n      },\n    })\n  );\n\n  applyAsyncActionProjectDir(\n    program\n      .command('upload:ios [path]')\n      .alias('ui')\n      .description(`${chalk.yellow`Superseded`} by ${chalk.bold`eas submit`} in eas-cli`)\n      .helpGroup('deprecated')\n      .option('--verbose', migrateToEasCliArg('--verbose'))\n      .option('--latest', migrateToEasCliArg('--latest'))\n      .option('--id <id>', migrateToEasCliArg('--id <id>'))\n      .option('--path [path]', migrateToEasCliArg('--path <path>'))\n      .option('--url <url>', migrateToEasCliArg('--url <url>'))\n      .option('--apple-id <apple-id>', migrateToEasJsonProperty('appleId'))\n      .option('--itc-team-id <itc-team-id>', migrateToEasJsonProperty('appleTeamId'))\n      .option('--app-name <app-name>', migrateToEasJsonProperty('appName'))\n      .option('--company-name <company-name>', migrateToEasJsonProperty('companyName'))\n      .option('--sku <sku>', migrateToEasJsonProperty('sku'))\n      .option('--language <language>', migrateToEasJsonProperty('language')),\n    async () => ({\n      async actionAsync() {\n        logMigration('ios');\n      },\n    })\n  );\n}\n"],"file":"upload.js"}