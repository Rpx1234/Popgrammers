{"version":3,"sources":["../../../src/commands/fetch/utils.ts"],"names":["assertSlug","slug","chalk","bold","maybeRenameExistingFileAsync","projectRoot","filename","desiredFilePath","path","resolve","fs","pathExists","num","Log","log","rename"],"mappings":";;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;;;;;AAQO,SAASA,UAAT,CAAoBC,IAApB,EAA6C;AAClD,yBAAOA,IAAP,EAAc,GAAEC,iBAAMC,IAAN,CAAWF,IAAX,CAAiB,sDAAjC;AACD;;AAEM,eAAeG,4BAAf,CAA4CC,WAA5C,EAAiEC,QAAjE,EAAmF;AACxF,QAAMC,eAAe,GAAGC,IAAI,GAACC,OAAL,CAAaJ,WAAb,EAA0BC,QAA1B,CAAxB;;AAEA,MAAI,MAAMI,EAAE,GAACC,UAAH,CAAcJ,eAAd,CAAV,EAA0C;AACxC,QAAIK,GAAG,GAAG,CAAV;;AACA,WAAO,MAAMF,EAAE,GAACC,UAAH,CAAcH,IAAI,GAACC,OAAL,CAAaJ,WAAb,EAA2B,OAAMO,GAAI,IAAGN,QAAS,EAAjD,CAAd,CAAb,EAAiF;AAC/EM,MAAAA,GAAG;AACJ;;AACDC,mBAAIC,GAAJ,CACG,+BAA8BP,eAAgB,0CAAyCK,GAAI,IAAGN,QAAS,IAD1G;;AAGA,UAAMI,EAAE,GAACK,MAAH,CAAUR,eAAV,EAA2BC,IAAI,GAACC,OAAL,CAAaJ,WAAb,EAA2B,OAAMO,GAAI,IAAGN,QAAS,EAAjD,CAA3B,CAAN;AACD;AACF","sourcesContent":["import assert from 'assert';\nimport chalk from 'chalk';\nimport * as fs from 'fs-extra';\nimport * as path from 'path';\n\nimport Log from '../../log';\n\nexport type Options = {\n  parent?: {\n    nonInteractive: boolean;\n  };\n};\n\nexport function assertSlug(slug: any): asserts slug {\n  assert(slug, `${chalk.bold(slug)} field must be set in your app.json or app.config.js`);\n}\n\nexport async function maybeRenameExistingFileAsync(projectRoot: string, filename: string) {\n  const desiredFilePath = path.resolve(projectRoot, filename);\n\n  if (await fs.pathExists(desiredFilePath)) {\n    let num = 1;\n    while (await fs.pathExists(path.resolve(projectRoot, `OLD_${num}_${filename}`))) {\n      num++;\n    }\n    Log.log(\n      `\\nA file already exists at \"${desiredFilePath}\"\\n  Renaming the existing file to OLD_${num}_${filename}\\n`\n    );\n    await fs.rename(desiredFilePath, path.resolve(projectRoot, `OLD_${num}_${filename}`));\n  }\n}\n"],"file":"utils.js"}